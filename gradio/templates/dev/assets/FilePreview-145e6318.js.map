{"version":3,"file":"FilePreview-145e6318.js","sources":["../../../../js/file/shared/utils.ts","../../../../js/file/shared/FilePreview.svelte"],"sourcesContent":["import type { FileData } from \"@gradio/upload\";\n\nexport const prettyBytes = (bytes: number): string => {\n\tlet units = [\"B\", \"KB\", \"MB\", \"GB\", \"PB\"];\n\tlet i = 0;\n\twhile (bytes > 1024) {\n\t\tbytes /= 1024;\n\t\ti++;\n\t}\n\tlet unit = units[i];\n\treturn bytes.toFixed(1) + \"&nbsp;\" + unit;\n};\n\nexport const display_file_name = (value: FileData): string => {\n\tvar str: string;\n\tstr = value.orig_name || value.name;\n\tconst max_length = 30;\n\n\tif (str.length > max_length) {\n\t\tconst truncated_name = str.substring(0, max_length);\n\t\tconst file_extension_index = str.lastIndexOf(\".\");\n\t\tif (file_extension_index !== -1) {\n\t\t\tconst file_extension = str.slice(file_extension_index);\n\t\t\treturn `${truncated_name}..${file_extension}`;\n\t\t}\n\t\treturn truncated_name;\n\t}\n\treturn str;\n};\n\nexport const display_file_size = (value: FileData | FileData[]): string => {\n\tvar total_size = 0;\n\tif (Array.isArray(value)) {\n\t\tfor (var file of value) {\n\t\t\tif (file.size !== undefined) total_size += file.size;\n\t\t}\n\t} else {\n\t\ttotal_size = value.size || 0;\n\t}\n\treturn prettyBytes(total_size);\n};\n","<script lang=\"ts\">\n\timport type { FileData } from \"@gradio/upload\";\n\timport { display_file_name, display_file_size } from \"./utils\";\n\timport { createEventDispatcher } from \"svelte\";\n\timport type { I18nFormatter, SelectData } from \"@gradio/utils\";\n\n\tconst dispatch = createEventDispatcher<{\n\t\tselect: SelectData;\n\t}>();\n\texport let value: FileData | FileData[];\n\texport let selectable = false;\n\texport let height: number | undefined = undefined;\n\texport let i18n: I18nFormatter;\n</script>\n\n<div\n\tclass=\"file-preview-holder\"\n\tstyle=\"max-height: {typeof height === undefined ? 'auto' : height + 'px'};\"\n>\n\t<table class=\"file-preview\">\n\t\t<tbody>\n\t\t\t{#each Array.isArray(value) ? value : [value] as file, i}\n\t\t\t\t<tr\n\t\t\t\t\tclass=\"file\"\n\t\t\t\t\tclass:selectable\n\t\t\t\t\ton:click={() =>\n\t\t\t\t\t\tdispatch(\"select\", {\n\t\t\t\t\t\t\tvalue: file.orig_name || file.name,\n\t\t\t\t\t\t\tindex: i\n\t\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t{display_file_name(file)}\n\t\t\t\t\t</td>\n\n\t\t\t\t\t<td class=\"download\">\n\t\t\t\t\t\t{#if file.data}\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={file.data}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\tdownload={window.__is_colab__\n\t\t\t\t\t\t\t\t\t? null\n\t\t\t\t\t\t\t\t\t: file.orig_name || file.name}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{@html display_file_size(file)}&nbsp;&#8675;\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{i18n(\"file.uploading\")}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t{/each}\n\t\t</tbody>\n\t</table>\n</div>\n\n<style>\n\ttd {\n\t\twidth: 45%;\n\t}\n\n\ttd:last-child {\n\t\twidth: 10%;\n\t\ttext-align: right;\n\t}\n\t.file-preview-holder {\n\t\toverflow-x: auto;\n\t\toverflow-y: auto;\n\t}\n\t.file-preview {\n\t\twidth: var(--size-full);\n\t\tmax-height: var(--size-60);\n\t\toverflow-y: auto;\n\t\tmargin-top: var(--size-1);\n\t\tcolor: var(--body-text-color);\n\t}\n\t.file {\n\t\twidth: var(--size-full);\n\t}\n\n\t.file > * {\n\t\tpadding: var(--size-1) var(--size-2-5);\n\t}\n\n\t.download:hover {\n\t\ttext-decoration: underline;\n\t}\n\t.download > a {\n\t\tcolor: var(--link-text-color);\n\t}\n\n\t.download > a:hover {\n\t\tcolor: var(--link-text-color-hover);\n\t}\n\t.download > a:visited {\n\t\tcolor: var(--link-text-color-visited);\n\t}\n\t.download > a:active {\n\t\tcolor: var(--link-text-color-active);\n\t}\n\t.selectable {\n\t\tcursor: pointer;\n\t}\n\n\ttbody > tr:nth-child(even) {\n\t\tbackground: var(--block-background-fill);\n\t}\n\n\ttbody > tr:nth-child(odd) {\n\t\tbackground: var(--table-odd-background-fill);\n\t}\n</style>\n"],"names":[],"mappings":"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"}