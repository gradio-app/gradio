{"version":3,"file":"index-03e7a9f2.js","sources":["../../../../js/image/static/ImagePreview.svelte","../../../../js/image/static/StaticImage.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport type { SelectData } from \"@gradio/utils\";\n\timport { uploadToHuggingFace } from \"@gradio/utils\";\n\timport { BlockLabel, Empty, IconButton, ShareButton } from \"@gradio/atoms\";\n\timport { Download } from \"@gradio/icons\";\n\timport { get_coordinates_of_clicked_image } from \"../shared/utils\";\n\n\timport { Image } from \"@gradio/icons\";\n\timport { type FileData, normalise_file } from \"@gradio/upload\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\n\texport let value: null | FileData;\n\tlet value_: null | FileData;\n\texport let label: string | undefined = undefined;\n\texport let show_label: boolean;\n\texport let show_download_button = true;\n\texport let selectable = false;\n\texport let show_share_button = false;\n\texport let root: string;\n\texport let i18n: I18nFormatter;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: string;\n\t\tselect: SelectData;\n\t}>();\n\n\t$: value && dispatch(\"change\", value.data);\n\n\t$: if (value !== value_) {\n\t\tvalue_ = value;\n\t\tnormalise_file(value_, root, null);\n\t}\n\n\tconst handle_click = (evt: MouseEvent): void => {\n\t\tlet coordinates = get_coordinates_of_clicked_image(evt);\n\t\tif (coordinates) {\n\t\t\tdispatch(\"select\", { index: coordinates, value: null });\n\t\t}\n\t};\n</script>\n\n<BlockLabel {show_label} Icon={Image} label={label || i18n(\"image.image\")} />\n{#if value_ === null}\n\t<Empty unpadded_box={true} size=\"large\"><Image /></Empty>\n{:else}\n\t<div class=\"icon-buttons\">\n\t\t{#if show_download_button}\n\t\t\t<a\n\t\t\t\thref={value_.data}\n\t\t\t\ttarget={window.__is_colab__ ? \"_blank\" : null}\n\t\t\t\tdownload={\"image\"}\n\t\t\t>\n\t\t\t\t<IconButton Icon={Download} label={i18n(\"common.download\")} />\n\t\t\t</a>\n\t\t{/if}\n\t\t{#if show_share_button}\n\t\t\t<ShareButton\n\t\t\t\t{i18n}\n\t\t\t\ton:share\n\t\t\t\ton:error\n\t\t\t\tformatter={async (value) => {\n\t\t\t\t\tif (!value) return \"\";\n\t\t\t\t\tlet url = await uploadToHuggingFace(value, \"base64\");\n\t\t\t\t\treturn `<img src=\"${url}\" />`;\n\t\t\t\t}}\n\t\t\t\t{value}\n\t\t\t/>\n\t\t{/if}\n\t</div>\n\t<!-- TODO: fix -->\n\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t<!-- svelte-ignore a11y-no-noninteractive-element-interactions-->\n\t<img src={value_.data} alt=\"\" class:selectable on:click={handle_click} loading=\"lazy\"/>\n{/if}\n\n<style>\n\timg {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tobject-fit: contain;\n\t}\n\n\t.selectable {\n\t\tcursor: crosshair;\n\t}\n\n\t.icon-buttons {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\ttop: 6px;\n\t\tright: 6px;\n\t\tgap: var(--size-1);\n\t}\n</style>\n","<svelte:options accessors={true} />\n\n<script lang=\"ts\">\n\timport type { Gradio, SelectData } from \"@gradio/utils\";\n\timport StaticImage from \"./ImagePreview.svelte\";\n\n\timport { Block } from \"@gradio/atoms\";\n\n\timport { StatusTracker } from \"@gradio/statustracker\";\n\timport type { FileData } from \"js/upload/src\";\n\timport type { LoadingStatus } from \"@gradio/statustracker\";\n\n\texport let elem_id = \"\";\n\texport let elem_classes: string[] = [];\n\texport let visible = true;\n\texport let value: null | FileData = null;\n\texport let label: string;\n\texport let show_label: boolean;\n\texport let show_download_button: boolean;\n\texport let root: string;\n\n\texport let height: number | undefined;\n\texport let width: number | undefined;\n\n\texport let selectable = false;\n\texport let container = true;\n\texport let scale: number | null = null;\n\texport let min_width: number | undefined = undefined;\n\texport let loading_status: LoadingStatus;\n\texport let show_share_button = false;\n\texport let gradio: Gradio<{\n\t\tchange: never;\n\t\terror: string;\n\t\tselect: SelectData;\n\t\tshare: ShareData;\n\t}>;\n\n\t$: value, gradio.dispatch(\"change\");\n\tlet dragging: boolean;\n\n\t$: value = !value ? null : value;\n</script>\n\n<Block\n\t{visible}\n\tvariant={\"solid\"}\n\tborder_mode={dragging ? \"focus\" : \"base\"}\n\tpadding={false}\n\t{elem_id}\n\t{elem_classes}\n\theight={height || undefined}\n\t{width}\n\tallow_overflow={false}\n\t{container}\n\t{scale}\n\t{min_width}\n>\n\t<StatusTracker\n\t\tautoscroll={gradio.autoscroll}\n\t\ti18n={gradio.i18n}\n\t\t{...loading_status}\n\t/>\n\t<StaticImage\n\t\ton:select={({ detail }) => gradio.dispatch(\"select\", detail)}\n\t\ton:share={({ detail }) => gradio.dispatch(\"share\", detail)}\n\t\ton:error={({ detail }) => gradio.dispatch(\"error\", detail)}\n\t\t{root}\n\t\t{value}\n\t\t{label}\n\t\t{show_label}\n\t\t{show_download_button}\n\t\t{selectable}\n\t\t{show_share_button}\n\t\ti18n={gradio.i18n}\n\t/>\n</Block>\n"],"names":[],"mappings":"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"}