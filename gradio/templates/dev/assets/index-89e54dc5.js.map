{"version":3,"file":"index-89e54dc5.js","sources":["../../../../js/uploadbutton/interactive/InteractiveUploadButton.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport type { Gradio } from \"@gradio/utils\";\n\timport { getContext, tick } from \"svelte\";\n\timport type { FileData } from \"@gradio/upload\";\n\timport UploadButton from \"../shared\";\n\timport { upload_files as default_upload_files } from \"@gradio/client\";\n\timport { blobToBase64 } from \"@gradio/upload\";\n\n\texport let elem_id = \"\";\n\texport let elem_classes: string[] = [];\n\texport let visible = true;\n\texport let label: string;\n\texport let value: null | FileData;\n\texport let file_count: string;\n\texport let file_types: string[] = [];\n\texport let root: string;\n\texport let size: \"sm\" | \"lg\" = \"lg\";\n\texport let scale: number | null = null;\n\texport let min_width: number | undefined = undefined;\n\texport let variant: \"primary\" | \"secondary\" | \"stop\" = \"secondary\";\n\texport let gradio: Gradio<{\n\t\tchange: FileData | null;\n\t\tupload: FileData;\n\t\tclick: never;\n\t}>;\n\n\tconst upload_files =\n\t\tgetContext<typeof default_upload_files>(\"upload_files\") ??\n\t\tdefault_upload_files;\n\n\tasync function handle_upload({\n\t\tdetail\n\t}: CustomEvent<FileData>): Promise<void> {\n\t\tvalue = detail;\n\t\tawait tick();\n\t\tlet files = (Array.isArray(detail) ? detail : [detail]).map(\n\t\t\t(file_data) => file_data.blob!\n\t\t);\n\n\t\tupload_files(root, files).then(async (response) => {\n\t\t\tif (response.error) {\n\t\t\t\t(Array.isArray(detail) ? detail : [detail]).forEach(\n\t\t\t\t\tasync (file_data, i) => {\n\t\t\t\t\t\tfile_data.data = await blobToBase64(file_data.blob!);\n\t\t\t\t\t\tfile_data.blob = undefined;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t(Array.isArray(detail) ? detail : [detail]).forEach((file_data, i) => {\n\t\t\t\t\tif (response.files) {\n\t\t\t\t\t\tfile_data.orig_name = file_data.name;\n\t\t\t\t\t\tfile_data.name = response.files[i];\n\t\t\t\t\t\tfile_data.is_file = true;\n\t\t\t\t\t\tfile_data.blob = undefined;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tgradio.dispatch(\"change\", value);\n\t\t\tgradio.dispatch(\"upload\", detail);\n\t\t});\n\t}\n</script>\n\n<UploadButton\n\t{elem_id}\n\t{elem_classes}\n\t{visible}\n\t{file_count}\n\t{file_types}\n\t{size}\n\t{scale}\n\t{min_width}\n\t{variant}\n\t{label}\n\ton:click={() => gradio.dispatch(\"click\")}\n\ton:load={handle_upload}\n>\n\t{gradio.i18n(label)}\n</UploadButton>\n"],"names":["upload_files","default_upload_files"],"mappings":"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"}