{"version":3,"file":"UploadButton-e351c051.js","sources":["../../../../js/uploadbutton/shared/UploadButton.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { BaseButton } from \"@gradio/button/static\";\n\timport { createEventDispatcher } from \"svelte\";\n\timport type { FileData } from \"@gradio/upload\";\n\n\texport let elem_id = \"\";\n\texport let elem_classes: string[] = [];\n\texport let visible = true;\n\texport let file_count: string;\n\texport let file_types: string[] = [];\n\texport let include_file_metadata = true;\n\texport let size: \"sm\" | \"lg\" = \"lg\";\n\texport let scale: number | null = null;\n\texport let min_width: number | undefined = undefined;\n\texport let variant: \"primary\" | \"secondary\" | \"stop\" = \"secondary\";\n\texport let label: string;\n\texport let disabled = false;\n\n\tlet hidden_upload: HTMLInputElement;\n\tconst dispatch = createEventDispatcher();\n\tlet accept_file_types: string | null;\n\tif (file_types == null) {\n\t\taccept_file_types = null;\n\t} else {\n\t\tfile_types = file_types.map((x) => {\n\t\t\tif (x.startsWith(\".\")) {\n\t\t\t\treturn x;\n\t\t\t}\n\t\t\treturn x + \"/*\";\n\t\t});\n\t\taccept_file_types = file_types.join(\", \");\n\t}\n\n\tfunction openFileUpload(): void {\n\t\thidden_upload.click();\n\t}\n\n\tfunction loadFiles(files: FileList): void {\n\t\tlet _files: File[] = Array.from(files);\n\t\tif (!files.length) {\n\t\t\treturn;\n\t\t}\n\t\tif (file_count === \"single\") {\n\t\t\t_files = [files[0]];\n\t\t}\n\t\tvar all_file_data: (FileData | File)[] = [];\n\t\t_files.forEach((f, i) => {\n\t\t\tall_file_data[i] = include_file_metadata\n\t\t\t\t? {\n\t\t\t\t\t\tname: f.name,\n\t\t\t\t\t\tsize: f.size,\n\t\t\t\t\t\tdata: \"\",\n\t\t\t\t\t\tblob: f\n\t\t\t\t  }\n\t\t\t\t: f;\n\t\t\tif (\n\t\t\t\tall_file_data.filter((x) => x !== undefined).length === files.length\n\t\t\t) {\n\t\t\t\tdispatch(\n\t\t\t\t\t\"load\",\n\t\t\t\t\tfile_count == \"single\" ? all_file_data[0] : all_file_data\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction loadFilesFromUpload(e: Event): void {\n\t\tconst target = e.target as HTMLInputElement;\n\t\tif (!target.files) {\n\t\t\treturn;\n\t\t}\n\t\tloadFiles(target.files);\n\t}\n\n\tfunction clearInputValue(e: Event): void {\n\t\tconst target = e.target as HTMLInputElement;\n\t\tif (target.value) target.value = \"\";\n\t}\n</script>\n\n<input\n\tclass=\"hide\"\n\taccept={accept_file_types}\n\ttype=\"file\"\n\tbind:this={hidden_upload}\n\ton:change={loadFilesFromUpload}\n\ton:click={clearInputValue}\n\tmultiple={file_count === \"multiple\" || undefined}\n\twebkitdirectory={file_count === \"directory\" || undefined}\n\tmozdirectory={file_count === \"directory\" || undefined}\n\tdata-testid=\"{label}-upload-button\"\n/>\n\n<BaseButton\n\t{size}\n\t{variant}\n\t{elem_id}\n\t{elem_classes}\n\t{visible}\n\ton:click={openFileUpload}\n\t{scale}\n\t{min_width}\n\t{disabled}\n>\n\t<slot />\n</BaseButton>\n\n<style>\n\t.hide {\n\t\tdisplay: none;\n\t}\n</style>\n"],"names":[],"mappings":"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"}