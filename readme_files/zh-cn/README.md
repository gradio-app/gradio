<!-- DO NOT EDIT THIS FILE DIRECTLY. INSTEAD EDIT THE `readme_template.md` OR `guides/1)getting_started/1)quickstart.md` TEMPLATES AND THEN RUN `render_readme.py` SCRIPT. -->

<div align="center">

[<img src="../gradio.svg" alt="gradio" width=400>](https://gradio.app)<br>
<em>轻松构建 & 分享 令人愉快的机器学习演示</em>

[![gradio-backend](https://github.com/gradio-app/gradio/actions/workflows/backend.yml/badge.svg)](https://github.com/gradio-app/gradio/actions/workflows/backend.yml)
[![gradio-js](https://github.com/gradio-app/gradio/actions/workflows/ui.yml/badge.svg)](https://github.com/gradio-app/gradio/actions/workflows/ui.yml)  
 [![PyPI](https://img.shields.io/pypi/v/gradio)](https://pypi.org/project/gradio/)
[![PyPI downloads](https://img.shields.io/pypi/dm/gradio)](https://pypi.org/project/gradio/)
![Python version](https://img.shields.io/badge/python-3.10+-important)
[![Twitter follow](https://img.shields.io/twitter/follow/gradio?style=social&label=follow)](https://twitter.com/gradio)

[官网](https://gradio.app)
| [文档](https://gradio.app/docs/)
| [指南](https://gradio.app/guides/)
| [开始](https://gradio.app/getting_started/)
| [示例](../../demo/)
| [English](https://github.com/gradio-app/gradio#readme)

</div>

# Gradio：用 Python 快速构建机器学习网页应用

Gradio 是一个开源的 Python 库，用于快速构建交互式机器学习模型演示和 Web 应用程序。

使用 Gradio，您可以快速为机器学习模型创建交互式演示界面，让用户在浏览器中试用模型、上传图片或音频，并以交互方式查看模型的输出。

![Interface montage](../header-image.jpg)

Gradio 的用途：

- 和他人共享机器学习模型/数据的**演示**界面

- 快速部署与分享模型（例如将模型托管并部署为可访问的演示）

- 在模型开发过程中使用可视化工具交互式地**调试**模型

### 快速开始

**依赖**：Gradio 需要 [Python 3.8 及以上](https://www.python.org/downloads/)。

#### Hello, World

要用 Gradio 运行 "Hello World" 示例，按下面步骤操作：

1. 使用 pip 安装 Gradio：

```bash
pip install gradio
```

2. 在 Python 文件或 Jupyter Notebook 中运行以下代码（也可在 Google Colab 中运行）：

```python
import gradio as gr

def greet(name):
    return "Hello " + name + "!"

demo = gr.Interface(fn=greet, inputs="text", outputs="text")
demo.launch()
```

3. 运行后，示例将在浏览器中打开（通常为 [http://localhost:7860](http://localhost:7860)）。

![`hello_world` demo](../../demo/hello_world/screenshot.gif)

#### `Interface` 简介

你可以在示例中看到我们使用了 `gradio.Interface`。`Interface` 类用于把任意 Python 函数暴露为一个简单的 web 界面。上面示例中使用的是一个简短的函数，但该函数可以是任意可调用对象（例如预训练模型的推理函数）。

`Interface` 类核心参数：

- `fn` : 被 UI 调用的函数
- `inputs` : 作为输入组件（例如 `"text"`, `"image"` or `"audio"`）
- `outputs` : 作为输出组件（例如 `"text"`, `"image"` or `"label"`）

下面我们继续介绍输入/输出组件。

#### 组件属性

在演示中你可以自定义一些组件，比如 `Textbox`，可以改变 UI 组件的外观与行为。

例如想要自定义一个输入文本字段，例如你希望它更大并带有一个占位符，可以使用 `Textbox` 类；如果想用字符串快捷方式，也可以直接使用组件名称：

```python
import gradio as gr

def greet(name):
    return "Hello " + name + "!"

demo = gr.Interface(
    fn=greet,
    inputs=gr.Textbox(lines=2, placeholder="Name Here..."),
    outputs="text",
)
demo.launch()
```

![`hello_world_2` demo](../../demo/hello_world_2/screenshot.gif)

#### 多输出组件

假设一个更复杂的函数返回多个输出值，在下面示例中，我们定义一个函数该函数接受字符串与布尔值等，并返回一个字符串和数字：

```python
import gradio as gr

def greet(name, is_morning, temperature):
    salutation = "Good morning" if is_morning else "Good evening"
    greeting = f"{salutation} {name}. It is {temperature} degrees today"
    celsius = (temperature - 32) * 5 / 9
    return greeting, round(celsius, 2)

demo = gr.Interface(
    fn=greet,
    inputs=["text", "checkbox", gr.Slider(0, 100)],
    outputs=["text", "number"],
)
demo.launch()
```

![`hello_world_3` demo](../../demo/hello_world_3/screenshot.gif)

#### 图像输入

Gradio 支持多种输入组件，例如 `Image`、`DataFrame`、`Video`、`Label` 等。下面展示一个图像处理函数示例：

```python
import numpy as np
import gradio as gr

def sepia(input_img):
    sepia_filter = np.array([
        [0.393, 0.769, 0.189],
        [0.349, 0.686, 0.168],
        [0.272, 0.534, 0.131]
    ])
    sepia_img = input_img.dot(sepia_filter.T)
    sepia_img /= sepia_img.max()
    return sepia_img

demo = gr.Interface(sepia, gr.Image(), "image")
demo.launch()
```

![`sepia_filter` demo](../../demo/sepia_filter/screenshot.gif)

当使用 `Image` 组件作为输入时，组件会接收形状为 (height, width, 3) 的 NumPy 数组（表示 RGB）。默认情况下，Gradio 会将图片以 NumPy 数组的形式传递给函数。

你可以通过 `type=` 关键字设置组件的数据类型，例如如果你希望函数接收图片文件路径而不是 NumPy 数组，可以使用：

```python
gr.Image(type="filepath")
```

另外，`Image` 组件提供裁剪和缩放等编辑功能，这有助于在演示中展示模型在不同输入下的行为。

#### Blocks: 更灵活且可组合

Gradio 提供了两个主要抽象来构建演示：

1. **Interface**，适合快速创建简单示例；
2. **Blocks**，用于设计更复杂、灵活的界面，允许你控制组件布局和交互流程。

#### Blocks 示例

下面是一个使用 Blocks 的简单例子：

```python
import gradio as gr

def greet(name):
    return "Hello " + name + "!"

with gr.Blocks() as demo:
    name = gr.Textbox(label="Name")
    output = gr.Textbox(label="Output Box")
    greet_btn = gr.Button("Greet")
    greet_btn.click(fn=greet, inputs=name, outputs=output)

demo.launch()
```

![`hello_blocks` demo](../../demo/hello_blocks/screenshot.gif)

注意事项：

- `Blocks` 通常与 `with` 子句搭配使用，组件在该代码块中会自动添加到应用程序中。
- 组件的定义顺序决定了它们在界面中的布局（但你可以通过容器和布局组件自定义位置）。
- `Button` 可以绑定事件（如 `click`），将函数的输入/输出连接到组件上。

#### 复杂示例

以下是一个同时支持文本与图像操作的示例：

```python
import numpy as np
import gradio as gr

def flip_text(x):
    return x[::-1]

def flip_image(x):
    return np.fliplr(x)

with gr.Blocks() as demo:
    gr.Markdown("Flip text or image files using this demo.")
    with gr.Tabs():
        with gr.TabItem("Flip Text"):
            text_input = gr.Textbox()
            text_output = gr.Textbox()
            text_button = gr.Button("Flip")
        with gr.TabItem("Flip Image"):
            with gr.Row():
                image_input = gr.Image()
                image_output = gr.Image()
            image_button = gr.Button("Flip")

    text_button.click(flip_text, inputs=text_input, outputs=text_output)
    image_button.click(flip_image, inputs=image_input, outputs=image_output)

demo.launch()
```

更多关于使用 Blocks 构建复杂应用的内容，请参阅 [使用 Blocks 构建](https://gradio.app/building_with_blocks)。

现在你已经了解 Gradio 的基础使用！继续阅读 [下一章](https://gradio.app/key_features) 以了解更多功能。

## 开源支持

Gradio 由许多开源贡献者维护。如果你喜欢 Gradio，欢迎贡献和支持。

[<img src="../huggingface_mini.svg" alt="huggingface" height=40>](https://huggingface.co)
[<img src="../python.svg" alt="python" height=40>](https://www.python.org)
[<img src="../fastapi.svg" alt="fastapi" height=40>](https://fastapi.tiangolo.com)
[<img src="../encode.svg" alt="encode" height=40>](https://www.encode.io)
[<img src="../svelte.svg" alt="svelte" height=40>](https://svelte.dev)
[<img src="../vite.svg" alt="vite" height=40>](https://vitejs.dev)
[<img src="../pnpm.svg" alt="pnpm" height=40>](https://pnpm.io)
[<img src="../tailwind.svg" alt="tailwind" height=40>](https://tailwindcss.com)

## 引用

如果在工作中使用 Gradio，请引用：_[Gradio: Hassle-Free Sharing and Testing of ML Models in the Wild](https://arxiv.org/abs/1906.02569), ICML HILL 2019_。

```
@article{abid2019gradio,
  title = {Gradio: Hassle-Free Sharing and Testing of ML Models in the Wild},
  author = {Abid, Abubakar and Abdalla, Ali and Abid, Ali and Khan, Dawood and Alfozan, Abdulrahman and Zou, James},
  journal = {arXiv preprint arXiv:1906.02569},
  year = {2019},
}
```