{"guide": {"name": "creating-a-dashboard-from-supabase-data", "category": "tabular-data-science-and-plots", "pretty_category": "Tabular Data Science And Plots", "guide_index": null, "absolute_index": 24, "pretty_name": "Creating A Dashboard From Supabase Data", "content": "# Create a Dashboard from Supabase Data\n\nTags: TABULAR, DASHBOARD, PLOTS \n\n[Supabase](https://supabase.com/) is a cloud-based open-source backend that provides a PostgreSQL database, authentication, and other useful features for building web and mobile applications. In this tutorial, you will learn how to read data from Supabase and plot it in **real-time** on a Gradio Dashboard.\n\n**Prerequisites:** To start, you will need a free Supabase account, which you can sign up for here: [https://app.supabase.com/](https://app.supabase.com/)\n\nIn this end-to-end guide, you will learn how to:\n\n* Create tables in Supabase\n* Write data to Supabase using the Supabase Python Client\n* Visualize the data in a real-time dashboard using Gradio\n\nIf you already have data on Supabase that you'd like to visualize in a dashboard, you can skip the first two sections and go directly to [visualizing the data](#visualize-the-data-in-a-real-time-gradio-dashboard)!\n\n## Create a table in Supabase\n\nFirst of all, we need some data to visualize. Following this [excellent guide](https://supabase.com/blog/loading-data-supabase-python), we'll create fake commerce data and put it in Supabase. \n\n1\\. Start by creating a new project in Supabase. Once you're logged in, click the \"New Project\" button\n\n2\\. Give your project a name and database password. You can also choose a pricing plan (for our purposes, the Free Tier is sufficient!)\n\n3\\. You'll be presented with your API keys while the database spins up (can take up to 2 minutes). \n\n4\\. Click on \"Table Editor\" (the table icon) in the left pane to create a new table. We'll create a single table called `Product`, with the following schema:\n\n<center>\n<table>\n<tr><td>product_id</td><td>int8</td></tr>\n<tr><td>inventory_count</td><td>int8</td></tr>\n<tr><td>price</td><td>float8</td></tr>\n<tr><td>product_name</td><td>varchar</td></tr>\n</table>\n</center>\n\n5\\. Click Save to save the table schema. \n\n\nOur table is now ready!\n\n\n## Write data to Supabase\n\nThe next step is to write data to a Supabase dataset. We will use the Supabase Python library to do this. \n\n6\\. Install `supabase` by running the following command in your terminal:\n\n```bash\npip install supabase\n```\n\n7\\. Get your project URL and API key. Click the Settings (gear icon) on the left pane and click 'API'. The URL is listed in the Project URL box, while the API key is listed in Project API keys (with the tags `service_role`, `secret`)\n\n8\\. Now, run the following Python script to write some fake data to the table (note you have to put the values of `SUPABASE_URL` and `SUPABASE_SECRET_KEY` from step 7): \n\n```python\nimport supabase\n\n# Initialize the Supabase client\nclient = supabase.create_client('SUPABASE_URL', 'SUPABASE_SECRET_KEY')\n\n# Define the data to write\nimport random\n\nmain_list = []\nfor i in range(10):\n    value = {'product_id': i, \n             'product_name': f\"Item {i}\",\n             'inventory_count': random.randint(1, 100), \n             'price': random.random()*100\n            }\n    main_list.append(value)\n\n# Write the data to the table\ndata = client.table('Product').insert(main_list).execute()\n```\n\nReturn to your Supabase dashboard and refresh the page, you should now see 10 rows populated in the `Product` table!\n\n## Visualize the Data in a Real-Time Gradio Dashboard\n\nFinally, we will read the data from the Supabase dataset using the same `supabase` Python library and create a realtime dashboard using `gradio`. \n\nNote: We repeat certain steps in this section (like creating the Supabase client) in case you did not go through the previous sections. As described in Step 7, you will need the project URL and API Key for your database.\n\n9\\. Write a function that loads the data from the `Product` table and returns it as a pandas Dataframe:\n\n\n```python\nimport supabase\nimport pandas as pd\n\nclient = supabase.create_client('SUPABASE_URL', 'SUPABASE_SECRET_KEY')\n\ndef read_data():\n    response = client.table('Product').select(\"*\").execute()\n    df = pd.DataFrame(response.data)\n    return df\n```\n\n10\\. Create a small Gradio Dashboard with 2 Barplots that plots the prices and inventories of all of the items every minute and updates in real-time:\n\n```python\nimport gradio as gr\n\nwith gr.Blocks() as dashboard:\n    with gr.Row():\n        gr.BarPlot(read_data, x=\"product_id\", y=\"price\", title=\"Prices\", every=60)\n        gr.BarPlot(read_data, x=\"product_id\", y=\"inventory_count\", title=\"Inventory\", every=60)\n\ndashboard.queue().launch()\n```\n\nNotice that by passing in a function to `gr.BarPlot()`, we have the BarPlot query the database as soon as the web app loads (and then again every 60 seconds because of the `every` parameter). Your final dashboard should look something like this:\n\n<gradio-app space=\"abidlabs/supabase\"></gradio-app>\n\n\n## Conclusion\n\nThat's it! In this tutorial, you learned how to write data to a Supabase dataset, and then read that data and plot the results as bar plots. If you update the data in the Supabase database, you'll notice that the Gradio dashboard will update within a minute. \n\nTry adding more plots and visualizations to this example (or with a different dataset) to build a more complex dashboard! ", "html": "<h1 id=\"create-a-dashboard-from-supabase-data\">Create a Dashboard from Supabase Data</h1>\n\n<p><a rel=\"noopener\" target=\"_blank\" href=\"https://supabase.com/\">Supabase</a> is a cloud-based open-source backend that provides a PostgreSQL database, authentication, and other useful features for building web and mobile applications. In this tutorial, you will learn how to read data from Supabase and plot it in <strong>real-time</strong> on a Gradio Dashboard.</p>\n\n<p><strong>Prerequisites:</strong> To start, you will need a free Supabase account, which you can sign up for here: <a rel=\"noopener\" target=\"_blank\" href=\"https://app.supabase.com/\">https://app.supabase.com/</a></p>\n\n<p>In this end-to-end guide, you will learn how to:</p>\n\n<ul>\n<li>Create tables in Supabase</li>\n<li>Write data to Supabase using the Supabase Python Client</li>\n<li>Visualize the data in a real-time dashboard using Gradio</li>\n</ul>\n\n<p>If you already have data on Supabase that you'd like to visualize in a dashboard, you can skip the first two sections and go directly to <a href=\"#visualize-the-data-in-a-real-time-gradio-dashboard\">visualizing the data</a>!</p>\n\n<h2 id=\"create-a-table-in-supabase\">Create a table in Supabase</h2>\n\n<p>First of all, we need some data to visualize. Following this <a rel=\"noopener\" target=\"_blank\" href=\"https://supabase.com/blog/loading-data-supabase-python\">excellent guide</a>, we'll create fake commerce data and put it in Supabase. </p>\n\n<p>1. Start by creating a new project in Supabase. Once you're logged in, click the \"New Project\" button</p>\n\n<p>2. Give your project a name and database password. You can also choose a pricing plan (for our purposes, the Free Tier is sufficient!)</p>\n\n<p>3. You'll be presented with your API keys while the database spins up (can take up to 2 minutes). </p>\n\n<p>4. Click on \"Table Editor\" (the table icon) in the left pane to create a new table. We'll create a single table called <code>Product</code>, with the following schema:</p>\n\n<p><center></p>\n\n<table>\n<tr><td>product_id</td><td>int8</td></tr>\n<tr><td>inventory_count</td><td>int8</td></tr>\n<tr><td>price</td><td>float8</td></tr>\n<tr><td>product_name</td><td>varchar</td></tr>\n</table>\n\n<p></center></p>\n\n<p>5. Click Save to save the table schema. </p>\n\n<p>Our table is now ready!</p>\n\n<h2 id=\"write-data-to-supabase\">Write data to Supabase</h2>\n\n<p>The next step is to write data to a Supabase dataset. We will use the Supabase Python library to do this. </p>\n\n<p>6. Install <code>supabase</code> by running the following command in your terminal:</p>\n\n<div class='codeblock'><pre><code class='lang-bash'>pip install supabase\n</code></pre></div>\n\n<p>7. Get your project URL and API key. Click the Settings (gear icon) on the left pane and click 'API'. The URL is listed in the Project URL box, while the API key is listed in Project API keys (with the tags <code>service_role</code>, <code>secret</code>)</p>\n\n<p>8. Now, run the following Python script to write some fake data to the table (note you have to put the values of <code>SUPABASE_URL</code> and <code>SUPABASE_SECRET_KEY</code> from step 7): </p>\n\n<div class='codeblock'><pre><code class='lang-python'>import supabase\n\n# Initialize the Supabase client\nclient = supabase.create_client('SUPABASE_URL', 'SUPABASE_SECRET_KEY')\n\n# Define the data to write\nimport random\n\nmain_list = []\nfor i in range(10):\n    value = {'product_id': i, \n             'product_name': f\"Item {i}\",\n             'inventory_count': random.randint(1, 100), \n             'price': random.random()*100\n            }\n    main_list.append(value)\n\n# Write the data to the table\ndata = client.table('Product').insert(main_list).execute()\n</code></pre></div>\n\n<p>Return to your Supabase dashboard and refresh the page, you should now see 10 rows populated in the <code>Product</code> table!</p>\n\n<h2 id=\"visualize-the-data-in-a-real-time-gradio-dashboard\">Visualize the Data in a Real-Time Gradio Dashboard</h2>\n\n<p>Finally, we will read the data from the Supabase dataset using the same <code>supabase</code> Python library and create a realtime dashboard using <code>gradio</code>. </p>\n\n<p>Note: We repeat certain steps in this section (like creating the Supabase client) in case you did not go through the previous sections. As described in Step 7, you will need the project URL and API Key for your database.</p>\n\n<p>9. Write a function that loads the data from the <code>Product</code> table and returns it as a pandas Dataframe:</p>\n\n<div class='codeblock'><pre><code class='lang-python'>import supabase\nimport pandas as pd\n\nclient = supabase.create_client('SUPABASE_URL', 'SUPABASE_SECRET_KEY')\n\ndef read_data():\n    response = client.table('Product').select(\"*\").execute()\n    df = pd.DataFrame(response.data)\n    return df\n</code></pre></div>\n\n<p>10. Create a small Gradio Dashboard with 2 Barplots that plots the prices and inventories of all of the items every minute and updates in real-time:</p>\n\n<div class='codeblock'><pre><code class='lang-python'>import gradio as gr\n\nwith gr.Blocks() as dashboard:\n    with gr.Row():\n        gr.BarPlot(read_data, x=\"product_id\", y=\"price\", title=\"Prices\", every=60)\n        gr.BarPlot(read_data, x=\"product_id\", y=\"inventory_count\", title=\"Inventory\", every=60)\n\ndashboard.queue().launch()\n</code></pre></div>\n\n<p>Notice that by passing in a function to <code>gr.BarPlot()</code>, we have the BarPlot query the database as soon as the web app loads (and then again every 60 seconds because of the <code>every</code> parameter). Your final dashboard should look something like this:</p>\n\n<p><gradio-app space=\"abidlabs/supabase\"></gradio-app></p>\n\n<h2 id=\"conclusion\">Conclusion</h2>\n\n<p>That's it! In this tutorial, you learned how to write data to a Supabase dataset, and then read that data and plot the results as bar plots. If you update the data in the Supabase database, you'll notice that the Gradio dashboard will update within a minute. </p>\n\n<p>Try adding more plots and visualizations to this example (or with a different dataset) to build a more complex dashboard! </p>\n", "tags": ["TABULAR", "DASHBOARD", "PLOTS "], "spaces": [], "url": "/guides/creating-a-dashboard-from-supabase-data/", "contributor": null}}