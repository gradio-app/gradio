import{I as ut,C as _t}from"./Index-BXfYA563.js";import{B as ft}from"./BlockLabel-CR_JnqLq.js";import{I as mt}from"./Image-Bsh8Umrh.js";import{W as dt,a as gt,S as ht}from"./SelectSource-7LKWFg6v.js";import{g as pt}from"./utils-Gtzs_Zla.js";import{D as nt}from"./DropdownArrow-DYEGdzUN.js";import{S as bt}from"./Square-oAGqOwsh.js";import{f as vt}from"./Button-BEa7U3jO.js";import{S as wt}from"./StreamingBar-KX5cd1HF.js";import{b as kt}from"./index-6jqsFzvP.js";import{U as $t}from"./Upload-Gmod6Y_m.js";import{I as yt}from"./IconButtonWrapper-Cbc1cIwN.js";import{I as It}from"./Image-BBdpp_gM.js";const{SvelteComponent:St,append:Pe,attr:H,detach:Ct,init:qt,insert:Dt,noop:Be,safe_not_equal:Et,svg_element:Me}=window.__gradio__svelte__internal;function Wt(i){let e,t,n;return{c(){e=Me("svg"),t=Me("path"),n=Me("circle"),H(t,"d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"),H(n,"cx","12"),H(n,"cy","13"),H(n,"r","4"),H(e,"xmlns","http://www.w3.org/2000/svg"),H(e,"width","100%"),H(e,"height","100%"),H(e,"viewBox","0 0 24 24"),H(e,"fill","none"),H(e,"stroke","currentColor"),H(e,"stroke-width","1.5"),H(e,"stroke-linecap","round"),H(e,"stroke-linejoin","round"),H(e,"class","feather feather-camera")},m(l,s){Dt(l,e,s),Pe(e,t),Pe(e,n)},p:Be,i:Be,o:Be,d(l){l&&Ct(e)}}}class zt extends St{constructor(e){super(),qt(this,e,null,Wt,Et,{})}}const{SvelteComponent:Bt,append:Mt,attr:P,detach:Tt,init:jt,insert:Rt,noop:Te,safe_not_equal:Ut,svg_element:Fe}=window.__gradio__svelte__internal;function Nt(i){let e,t;return{c(){e=Fe("svg"),t=Fe("circle"),P(t,"cx","12"),P(t,"cy","12"),P(t,"r","10"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"width","100%"),P(e,"height","100%"),P(e,"viewBox","0 0 24 24"),P(e,"stroke-width","1.5"),P(e,"stroke-linecap","round"),P(e,"stroke-linejoin","round"),P(e,"class","feather feather-circle")},m(n,l){Rt(n,e,l),Mt(e,t)},p:Te,i:Te,o:Te,d(n){n&&Tt(e)}}}class Lt extends Bt{constructor(e){super(),jt(this,e,null,Nt,Ut,{})}}const{SvelteComponent:At,append:me,attr:je,create_component:Ht,destroy_component:Ot,detach:Pt,element:Re,init:Ft,insert:Vt,listen:Gt,mount_component:Jt,noop:Kt,safe_not_equal:Qt,set_style:Xt,space:Yt,text:Zt,transition_in:xt,transition_out:en}=window.__gradio__svelte__internal,{createEventDispatcher:tn}=window.__gradio__svelte__internal;function nn(i){let e,t,n,l,s,r="Click to Access Webcam",a,o,f,u;return l=new dt({}),{c(){e=Re("button"),t=Re("div"),n=Re("span"),Ht(l.$$.fragment),s=Yt(),a=Zt(r),je(n,"class","icon-wrap svelte-qbrfs"),je(t,"class","wrap svelte-qbrfs"),je(e,"class","svelte-qbrfs"),Xt(e,"height","100%")},m(m,y){Vt(m,e,y),me(e,t),me(t,n),Jt(l,n,null),me(t,s),me(t,a),o=!0,f||(u=Gt(e,"click",i[1]),f=!0)},p:Kt,i(m){o||(xt(l.$$.fragment,m),o=!0)},o(m){en(l.$$.fragment,m),o=!1},d(m){m&&Pt(e),Ot(l),f=!1,u()}}}function ln(i){const e=tn();return[e,()=>e("click")]}class rn extends At{constructor(e){super(),Ft(this,e,ln,nn,Qt,{})}}function on(){return navigator.mediaDevices.enumerateDevices()}function sn(i,e){e.srcObject=i,e.muted=!0,e.play()}async function Ve(i,e,t){const n={width:{ideal:1920},height:{ideal:1440}},l={video:t?{deviceId:{exact:t},...n}:n,audio:i};return navigator.mediaDevices.getUserMedia(l).then(s=>(sn(s,e),s))}function an(i){return i.filter(t=>t.kind==="videoinput")}const{SvelteComponent:cn,action_destroyer:un,add_render_callback:_n,append:I,attr:k,binding_callbacks:fn,check_outros:se,create_component:K,create_in_transition:mn,destroy_component:Q,destroy_each:dn,detach:L,element:z,empty:Le,ensure_array_like:Ge,flush:G,group_outros:ae,init:gn,insert:A,listen:we,mount_component:X,noop:Ae,run_all:hn,safe_not_equal:pn,set_data:_e,set_input_value:Ue,set_style:it,space:J,src_url_equal:Je,stop_propagation:bn,text:fe,toggle_class:Z,transition_in:S,transition_out:W}=window.__gradio__svelte__internal,{createEventDispatcher:vn,onMount:wn}=window.__gradio__svelte__internal;function Ke(i,e,t){const n=i.slice();return n[37]=e[t],n}function kn(i){let e,t,n,l,s,r,a,o,f,u,m;const y=[In,yn],w=[];function D(b,v){return b[2]==="video"||b[1]?0:1}n=D(i),l=w[n]=y[n](i);let _=!i[11]&&Qe(i),p=i[13]&&i[8]&&Xe(i);return{c(){e=z("div"),t=z("button"),l.c(),r=J(),_&&_.c(),a=J(),p&&p.c(),o=Le(),k(t,"aria-label",s=i[2]==="image"?"capture photo":"start recording"),k(t,"class","svelte-s8feoe"),k(e,"class","button-wrap svelte-s8feoe")},m(b,v){A(b,e,v),I(e,t),w[n].m(t,null),I(e,r),_&&_.m(e,null),A(b,a,v),p&&p.m(b,v),A(b,o,v),f=!0,u||(m=we(t,"click",i[16]),u=!0)},p(b,v){let O=n;n=D(b),n===O?w[n].p(b,v):(ae(),W(w[O],1,1,()=>{w[O]=null}),se(),l=w[n],l?l.p(b,v):(l=w[n]=y[n](b),l.c()),S(l,1),l.m(t,null)),(!f||v[0]&4&&s!==(s=b[2]==="image"?"capture photo":"start recording"))&&k(t,"aria-label",s),b[11]?_&&(ae(),W(_,1,1,()=>{_=null}),se()):_?(_.p(b,v),v[0]&2048&&S(_,1)):(_=Qe(b),_.c(),S(_,1),_.m(e,null)),b[13]&&b[8]?p?(p.p(b,v),v[0]&8448&&S(p,1)):(p=Xe(b),p.c(),S(p,1),p.m(o.parentNode,o)):p&&(ae(),W(p,1,1,()=>{p=null}),se())},i(b){f||(S(l),S(_),S(p),f=!0)},o(b){W(l),W(_),W(p),f=!1},d(b){b&&(L(e),L(a),L(o)),w[n].d(),_&&_.d(),p&&p.d(b),u=!1,m()}}}function $n(i){let e,t,n,l;return t=new rn({}),t.$on("click",i[26]),{c(){e=z("div"),K(t.$$.fragment),k(e,"title","grant webcam access"),it(e,"height","100%")},m(s,r){A(s,e,r),X(t,e,null),l=!0},p:Ae,i(s){l||(S(t.$$.fragment,s),s&&(n||_n(()=>{n=mn(e,vt,{delay:100,duration:200}),n.start()})),l=!0)},o(s){W(t.$$.fragment,s),l=!1},d(s){s&&L(e),Q(t)}}}function yn(i){let e,t,n;return t=new zt({}),{c(){e=z("div"),K(t.$$.fragment),k(e,"class","icon svelte-s8feoe"),k(e,"title","capture photo")},m(l,s){A(l,e,s),X(t,e,null),n=!0},p:Ae,i(l){n||(S(t.$$.fragment,l),n=!0)},o(l){W(t.$$.fragment,l),n=!1},d(l){l&&L(e),Q(t)}}}function In(i){let e,t,n,l;const s=[qn,Cn,Sn],r=[];function a(o,f){return o[1]&&o[10]==="waiting"?0:o[1]&&o[10]==="open"||!o[1]&&o[11]?1:2}return e=a(i),t=r[e]=s[e](i),{c(){t.c(),n=Le()},m(o,f){r[e].m(o,f),A(o,n,f),l=!0},p(o,f){let u=e;e=a(o),e===u?r[e].p(o,f):(ae(),W(r[u],1,1,()=>{r[u]=null}),se(),t=r[e],t?t.p(o,f):(t=r[e]=s[e](o),t.c()),S(t,1),t.m(n.parentNode,n))},i(o){l||(S(t),l=!0)},o(o){W(t),l=!1},d(o){o&&L(n),r[e].d(o)}}}function Sn(i){let e,t,n,l,s=i[4]("audio.record")+"",r,a;return n=new Lt({}),{c(){e=z("div"),t=z("div"),K(n.$$.fragment),l=J(),r=fe(s),k(t,"class","icon color-primary svelte-s8feoe"),k(t,"title","start recording"),k(e,"class","icon-with-text svelte-s8feoe")},m(o,f){A(o,e,f),I(e,t),X(n,t,null),I(e,l),I(e,r),a=!0},p(o,f){(!a||f[0]&16)&&s!==(s=o[4]("audio.record")+"")&&_e(r,s)},i(o){a||(S(n.$$.fragment,o),a=!0)},o(o){W(n.$$.fragment,o),a=!1},d(o){o&&L(e),Q(n)}}}function Cn(i){let e,t,n,l,s=i[4]("audio.stop")+"",r,a;return n=new bt({}),{c(){e=z("div"),t=z("div"),K(n.$$.fragment),l=J(),r=fe(s),k(t,"class","icon color-primary svelte-s8feoe"),k(t,"title","stop recording"),k(e,"class","icon-with-text svelte-s8feoe")},m(o,f){A(o,e,f),I(e,t),X(n,t,null),I(e,l),I(e,r),a=!0},p(o,f){(!a||f[0]&16)&&s!==(s=o[4]("audio.stop")+"")&&_e(r,s)},i(o){a||(S(n.$$.fragment,o),a=!0)},o(o){W(n.$$.fragment,o),a=!1},d(o){o&&L(e),Q(n)}}}function qn(i){let e,t,n,l,s=i[4]("audio.waiting")+"",r,a;return n=new gt({}),{c(){e=z("div"),t=z("div"),K(n.$$.fragment),l=J(),r=fe(s),k(t,"class","icon color-primary svelte-s8feoe"),k(t,"title","spinner"),k(e,"class","icon-with-text svelte-s8feoe"),it(e,"width","var(--size-24)")},m(o,f){A(o,e,f),I(e,t),X(n,t,null),I(e,l),I(e,r),a=!0},p(o,f){(!a||f[0]&16)&&s!==(s=o[4]("audio.waiting")+"")&&_e(r,s)},i(o){a||(S(n.$$.fragment,o),a=!0)},o(o){W(n.$$.fragment,o),a=!1},d(o){o&&L(e),Q(n)}}}function Qe(i){let e,t,n,l,s;return t=new nt({}),{c(){e=z("button"),K(t.$$.fragment),k(e,"class","icon svelte-s8feoe"),k(e,"aria-label","select input source")},m(r,a){A(r,e,a),X(t,e,null),n=!0,l||(s=we(e,"click",i[27]),l=!0)},p:Ae,i(r){n||(S(t.$$.fragment,r),n=!0)},o(r){W(t.$$.fragment,r),n=!1},d(r){r&&L(e),Q(t),l=!1,s()}}}function Xe(i){let e,t,n,l,s,r,a;n=new nt({});function o(m,y){return m[7].length===0?En:Dn}let f=o(i),u=f(i);return{c(){e=z("select"),t=z("button"),K(n.$$.fragment),l=J(),u.c(),k(t,"class","inset-icon svelte-s8feoe"),k(e,"class","select-wrap svelte-s8feoe"),k(e,"aria-label","select source")},m(m,y){A(m,e,y),I(e,t),X(n,t,null),I(t,l),u.m(e,null),s=!0,r||(a=[we(t,"click",bn(i[28])),un(He.call(null,e,i[17])),we(e,"change",i[14])],r=!0)},p(m,y){f===(f=o(m))&&u?u.p(m,y):(u.d(1),u=f(m),u&&(u.c(),u.m(e,null)))},i(m){s||(S(n.$$.fragment,m),s=!0)},o(m){W(n.$$.fragment,m),s=!1},d(m){m&&L(e),Q(n),u.d(),r=!1,hn(a)}}}function Dn(i){let e,t=Ge(i[7]),n=[];for(let l=0;l<t.length;l+=1)n[l]=Ye(Ke(i,t,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=Le()},m(l,s){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(l,s);A(l,e,s)},p(l,s){if(s[0]&384){t=Ge(l[7]);let r;for(r=0;r<t.length;r+=1){const a=Ke(l,t,r);n[r]?n[r].p(a,s):(n[r]=Ye(a),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(l){l&&L(e),dn(n,l)}}}function En(i){let e,t=i[4]("common.no_devices")+"",n;return{c(){e=z("option"),n=fe(t),e.__value="",Ue(e,e.__value),k(e,"class","svelte-s8feoe")},m(l,s){A(l,e,s),I(e,n)},p(l,s){s[0]&16&&t!==(t=l[4]("common.no_devices")+"")&&_e(n,t)},d(l){l&&L(e)}}}function Ye(i){let e,t=i[37].label+"",n,l,s,r;return{c(){e=z("option"),n=fe(t),l=J(),e.__value=s=i[37].deviceId,Ue(e,e.__value),e.selected=r=i[8].deviceId===i[37].deviceId,k(e,"class","svelte-s8feoe")},m(a,o){A(a,e,o),I(e,n),I(e,l)},p(a,o){o[0]&128&&t!==(t=a[37].label+"")&&_e(n,t),o[0]&128&&s!==(s=a[37].deviceId)&&(e.__value=s,Ue(e,e.__value)),o[0]&384&&r!==(r=a[8].deviceId===a[37].deviceId)&&(e.selected=r)},d(a){a&&L(e)}}}function Wn(i){let e,t,n,l,s,r,a,o,f,u,m;t=new wt({props:{time_limit:i[9]}});const y=[$n,kn],w=[];function D(_,p){return _[12]?1:0}return f=D(i),u=w[f]=y[f](i),{c(){e=z("div"),K(t.$$.fragment),n=J(),l=z("video"),s=J(),r=z("img"),o=J(),u.c(),k(l,"class","svelte-s8feoe"),Z(l,"flip",i[3]),Z(l,"hide",!i[12]||i[12]&&!!i[0]),Je(r.src,a=i[0]?.url)||k(r,"src",a),k(r,"class","svelte-s8feoe"),Z(r,"hide",!i[12]||i[12]&&!i[0]),k(e,"class","wrap svelte-s8feoe")},m(_,p){A(_,e,p),X(t,e,null),I(e,n),I(e,l),i[25](l),I(e,s),I(e,r),I(e,o),w[f].m(e,null),m=!0},p(_,p){const b={};p[0]&512&&(b.time_limit=_[9]),t.$set(b),(!m||p[0]&8)&&Z(l,"flip",_[3]),(!m||p[0]&4097)&&Z(l,"hide",!_[12]||_[12]&&!!_[0]),(!m||p[0]&1&&!Je(r.src,a=_[0]?.url))&&k(r,"src",a),(!m||p[0]&4097)&&Z(r,"hide",!_[12]||_[12]&&!_[0]);let v=f;f=D(_),f===v?w[f].p(_,p):(ae(),W(w[v],1,1,()=>{w[v]=null}),se(),u=w[f],u?u.p(_,p):(u=w[f]=y[f](_),u.c()),S(u,1),u.m(e,null))},i(_){m||(S(t.$$.fragment,_),S(u),m=!0)},o(_){W(t.$$.fragment,_),W(u),m=!1},d(_){_&&L(e),Q(t),i[25](null),w[f].d()}}}function He(i,e){const t=n=>{i&&!i.contains(n.target)&&!n.defaultPrevented&&e(n)};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function zn(i,e,t){let n,l=[],s=null,r=null,a="closed";const o=g=>{g==="closed"?(t(9,r=null),t(10,a="closed"),t(0,C=null)):g==="waiting"?t(10,a="waiting"):t(10,a="open")},f=g=>{M&&t(9,r=g)};let u,{streaming:m=!1}=e,{pending:y=!1}=e,{root:w=""}=e,{stream_every:D=1}=e,{mode:_="image"}=e,{mirror_webcam:p}=e,{include_audio:b}=e,{i18n:v}=e,{upload:O}=e,{value:C=null}=e;const T=vn();wn(()=>u=document.createElement("canvas"));const $=async g=>{const V=g.target.value;await Ve(b,n,V).then(async le=>{j=le,t(8,s=l.find(re=>re.deviceId===V)||null),t(13,Y=!1)})};async function d(){try{Ve(b,n).then(async g=>{t(12,ie=!0),t(7,l=await on()),j=g}).then(()=>an(l)).then(g=>{t(7,l=g);const U=j.getTracks().map(V=>V.getSettings()?.deviceId)[0];t(8,s=U&&g.find(V=>V.deviceId===U)||l[0])}),(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&T("error",v("image.no_webcam_support"))}catch(g){if(g instanceof DOMException&&g.name=="NotAllowedError")T("error",v("image.allow_webcam_access"));else throw g}}function h(){var g=u.getContext("2d");if((!m||m&&M)&&n.videoWidth&&n.videoHeight){if(u.width=n.videoWidth,u.height=n.videoHeight,g.drawImage(n,0,0,n.videoWidth,n.videoHeight),p&&(g.scale(-1,1),g.drawImage(n,-n.videoWidth,0)),m&&(!M||a==="waiting"))return;u.toBlob(U=>{T(m?"stream":"capture",U)},`image/${m?"jpeg":"png"}`,.8)}}let M=!1,B=[],j,R,F;function Ie(){if(M){F.stop();let g=new Blob(B,{type:R}),U=new FileReader;U.onload=async function(V){if(V.target){let le=new File([g],"sample."+R.substring(6));const re=await kt([le]);let ze=(await O(re,w))?.filter(Boolean)[0];T("capture",ze),T("stop_recording")}},U.readAsDataURL(g)}else{T("start_recording"),B=[];let g=["video/webm","video/mp4"];for(let U of g)if(MediaRecorder.isTypeSupported(U)){R=U;break}if(R===null){console.error("No supported MediaRecorder mimeType");return}F=new MediaRecorder(j,{mimeType:R}),F.addEventListener("dataavailable",function(U){B.push(U.data)}),F.start(200)}t(11,M=!M)}let ie=!1;function Se(){_==="image"&&m&&t(11,M=!M),_==="image"?h():Ie(),!M&&j&&(T("close_stream"),j.getTracks().forEach(g=>g.stop()),t(6,n.srcObject=null,n),t(12,ie=!1),window.setTimeout(()=>{t(0,C=null)},500),t(0,C=null))}m&&_==="image"&&window.setInterval(()=>{n&&!y&&h()},D*1e3);let Y=!1;function Ce(g){g.preventDefault(),g.stopPropagation(),t(13,Y=!1)}function qe(g){fn[g?"unshift":"push"](()=>{n=g,t(6,n)})}const De=async()=>d(),Ee=()=>t(13,Y=!0),We=()=>t(13,Y=!1);return i.$$set=g=>{"streaming"in g&&t(1,m=g.streaming),"pending"in g&&t(20,y=g.pending),"root"in g&&t(21,w=g.root),"stream_every"in g&&t(22,D=g.stream_every),"mode"in g&&t(2,_=g.mode),"mirror_webcam"in g&&t(3,p=g.mirror_webcam),"include_audio"in g&&t(23,b=g.include_audio),"i18n"in g&&t(4,v=g.i18n),"upload"in g&&t(24,O=g.upload),"value"in g&&t(0,C=g.value)},[C,m,_,p,v,He,n,l,s,r,a,M,ie,Y,$,d,Se,Ce,o,f,y,w,D,b,O,qe,De,Ee,We]}class Bn extends cn{constructor(e){super(),gn(this,e,zn,Wn,pn,{modify_stream:18,set_time_limit:19,streaming:1,pending:20,root:21,stream_every:22,mode:2,mirror_webcam:3,include_audio:23,i18n:4,upload:24,value:0,click_outside:5},null,[-1,-1])}get modify_stream(){return this.$$.ctx[18]}get set_time_limit(){return this.$$.ctx[19]}get streaming(){return this.$$.ctx[1]}set streaming(e){this.$$set({streaming:e}),G()}get pending(){return this.$$.ctx[20]}set pending(e){this.$$set({pending:e}),G()}get root(){return this.$$.ctx[21]}set root(e){this.$$set({root:e}),G()}get stream_every(){return this.$$.ctx[22]}set stream_every(e){this.$$set({stream_every:e}),G()}get mode(){return this.$$.ctx[2]}set mode(e){this.$$set({mode:e}),G()}get mirror_webcam(){return this.$$.ctx[3]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),G()}get include_audio(){return this.$$.ctx[23]}set include_audio(e){this.$$set({include_audio:e}),G()}get i18n(){return this.$$.ctx[4]}set i18n(e){this.$$set({i18n:e}),G()}get upload(){return this.$$.ctx[24]}set upload(e){this.$$set({upload:e}),G()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),G()}get click_outside(){return He}}const Mn=Bn,{SvelteComponent:Tn,create_component:lt,destroy_component:rt,init:jn,mount_component:ot,noop:Rn,safe_not_equal:Un,transition_in:st,transition_out:at}=window.__gradio__svelte__internal,{createEventDispatcher:Nn}=window.__gradio__svelte__internal;function Ln(i){let e,t;return e=new ut({props:{Icon:_t,label:"Remove Image"}}),e.$on("click",i[1]),{c(){lt(e.$$.fragment)},m(n,l){ot(e,n,l),t=!0},p:Rn,i(n){t||(st(e.$$.fragment,n),t=!0)},o(n){at(e.$$.fragment,n),t=!1},d(n){rt(e,n)}}}function An(i){let e,t;return e=new yt({props:{$$slots:{default:[Ln]},$$scope:{ctx:i}}}),{c(){lt(e.$$.fragment)},m(n,l){ot(e,n,l),t=!0},p(n,[l]){const s={};l&4&&(s.$$scope={dirty:l,ctx:n}),e.$set(s)},i(n){t||(st(e.$$.fragment,n),t=!0)},o(n){at(e.$$.fragment,n),t=!1},d(n){rt(e,n)}}}function Hn(i){const e=Nn();return[e,n=>{e("remove_image"),n.stopPropagation()}]}class On extends Tn{constructor(e){super(),jn(this,e,Hn,An,Un,{})}}const{SvelteComponent:Pn,add_flush_callback:ce,append:de,attr:pe,bind:ue,binding_callbacks:x,bubble:ge,check_outros:be,create_component:ee,create_slot:Fn,destroy_component:te,detach:ke,element:Ne,empty:Vn,flush:q,get_all_dirty_from_scope:Gn,get_slot_changes:Jn,group_outros:ve,init:Kn,insert:$e,listen:Qn,mount_component:ne,noop:Xn,safe_not_equal:Yn,set_style:Ze,space:he,toggle_class:ye,transition_in:E,transition_out:N,update_slot_base:Zn}=window.__gradio__svelte__internal,{createEventDispatcher:xn,tick:ei}=window.__gradio__svelte__internal;function xe(i){let e,t;return e=new On({}),e.$on("remove_image",i[28]),{c(){ee(e.$$.fragment)},m(n,l){ne(e,n,l),t=!0},p:Xn,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){te(e,n)}}}function et(i){let e;const t=i[27].default,n=Fn(t,i,i[42],null);return{c(){n&&n.c()},m(l,s){n&&n.m(l,s),e=!0},p(l,s){n&&n.p&&(!e||s[1]&2048)&&Zn(n,t,l,l[42],e?Jn(t,l[42],s,null):Gn(l[42]),null)},i(l){e||(E(n,l),e=!0)},o(l){N(n,l),e=!1},d(l){n&&n.d(l)}}}function ti(i){let e,t,n=i[3]===null&&et(i);return{c(){n&&n.c(),e=Vn()},m(l,s){n&&n.m(l,s),$e(l,e,s),t=!0},p(l,s){l[3]===null?n?(n.p(l,s),s[0]&8&&E(n,1)):(n=et(l),n.c(),E(n,1),n.m(e.parentNode,e)):n&&(ve(),N(n,1,1,()=>{n=null}),be())},i(l){t||(E(n),t=!0)},o(l){N(n),t=!1},d(l){l&&ke(e),n&&n.d(l)}}}function ni(i){let e,t,n,l,s;return t=new It({props:{src:i[3].url,alt:i[3].alt_text}}),{c(){e=Ne("div"),ee(t.$$.fragment),pe(e,"class","image-frame svelte-1ti4ehe"),ye(e,"selectable",i[11])},m(r,a){$e(r,e,a),ne(t,e,null),n=!0,l||(s=Qn(e,"click",i[24]),l=!0)},p(r,a){const o={};a[0]&8&&(o.src=r[3].url),a[0]&8&&(o.alt=r[3].alt_text),t.$set(o),(!n||a[0]&2048)&&ye(e,"selectable",r[11])},i(r){n||(E(t.$$.fragment,r),n=!0)},o(r){N(t.$$.fragment,r),n=!1},d(r){r&&ke(e),te(t),l=!1,s()}}}function ii(i){let e,t,n,l;function s(o){i[33](o)}function r(o){i[34](o)}let a={root:i[12],value:i[3],mirror_webcam:i[10],stream_every:i[17],streaming:i[9],mode:"image",include_audio:!1,i18n:i[13],upload:i[15]};return i[4]!==void 0&&(a.modify_stream=i[4]),i[5]!==void 0&&(a.set_time_limit=i[5]),e=new Mn({props:a}),x.push(()=>ue(e,"modify_stream",s)),x.push(()=>ue(e,"set_time_limit",r)),e.$on("capture",i[35]),e.$on("stream",i[36]),e.$on("error",i[37]),e.$on("drag",i[38]),e.$on("upload",i[39]),e.$on("close_stream",i[40]),{c(){ee(e.$$.fragment)},m(o,f){ne(e,o,f),l=!0},p(o,f){const u={};f[0]&4096&&(u.root=o[12]),f[0]&8&&(u.value=o[3]),f[0]&1024&&(u.mirror_webcam=o[10]),f[0]&131072&&(u.stream_every=o[17]),f[0]&512&&(u.streaming=o[9]),f[0]&8192&&(u.i18n=o[13]),f[0]&32768&&(u.upload=o[15]),!t&&f[0]&16&&(t=!0,u.modify_stream=o[4],ce(()=>t=!1)),!n&&f[0]&32&&(n=!0,u.set_time_limit=o[5],ce(()=>n=!1)),e.$set(u)},i(o){l||(E(e.$$.fragment,o),l=!0)},o(o){N(e.$$.fragment,o),l=!1},d(o){te(e,o)}}}function tt(i){let e,t,n;function l(r){i[41](r)}let s={sources:i[8],handle_clear:i[21],handle_select:i[25]};return i[1]!==void 0&&(s.active_source=i[1]),e=new ht({props:s}),x.push(()=>ue(e,"active_source",l)),{c(){ee(e.$$.fragment)},m(r,a){ne(e,r,a),n=!0},p(r,a){const o={};a[0]&256&&(o.sources=r[8]),!t&&a[0]&2&&(t=!0,o.active_source=r[1],ce(()=>t=!1)),e.$set(o)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){N(e.$$.fragment,r),n=!1},d(r){te(e,r)}}}function li(i){let e,t,n,l,s,r,a,o,f,u,m,y,w=i[8].length>1||i[8].includes("clipboard"),D;e=new ft({props:{show_label:i[7],Icon:mt,label:i[6]||"Image"}});let _=i[3]?.url&&!i[18]&&xe(i);function p(d){i[30](d)}function b(d){i[31](d)}let v={hidden:i[3]!==null||i[1]==="webcam",filetype:i[1]==="clipboard"?"clipboard":"image/*",root:i[12],max_file_size:i[14],disable_click:!i[8].includes("upload")||i[3]!==null,upload:i[15],stream_handler:i[16],$$slots:{default:[ti]},$$scope:{ctx:i}};i[0]!==void 0&&(v.uploading=i[0]),i[2]!==void 0&&(v.dragging=i[2]),r=new $t({props:v}),i[29](r),x.push(()=>ue(r,"uploading",p)),x.push(()=>ue(r,"dragging",b)),r.$on("load",i[20]),r.$on("error",i[32]);const O=[ii,ni],C=[];function T(d,h){return d[1]==="webcam"&&(d[9]||!d[9]&&!d[3])?0:d[3]!==null&&!d[9]?1:-1}~(u=T(i))&&(m=C[u]=O[u](i));let $=w&&tt(i);return{c(){ee(e.$$.fragment),t=he(),n=Ne("div"),_&&_.c(),l=he(),s=Ne("div"),ee(r.$$.fragment),f=he(),m&&m.c(),y=he(),$&&$.c(),pe(s,"class","upload-container svelte-1ti4ehe"),ye(s,"reduced-height",i[8].length>1),Ze(s,"width",i[3]?"auto":"100%"),pe(n,"data-testid","image"),pe(n,"class","image-container svelte-1ti4ehe")},m(d,h){ne(e,d,h),$e(d,t,h),$e(d,n,h),_&&_.m(n,null),de(n,l),de(n,s),ne(r,s,null),de(s,f),~u&&C[u].m(s,null),de(n,y),$&&$.m(n,null),D=!0},p(d,h){const M={};h[0]&128&&(M.show_label=d[7]),h[0]&64&&(M.label=d[6]||"Image"),e.$set(M),d[3]?.url&&!d[18]?_?(_.p(d,h),h[0]&262152&&E(_,1)):(_=xe(d),_.c(),E(_,1),_.m(n,l)):_&&(ve(),N(_,1,1,()=>{_=null}),be());const B={};h[0]&10&&(B.hidden=d[3]!==null||d[1]==="webcam"),h[0]&2&&(B.filetype=d[1]==="clipboard"?"clipboard":"image/*"),h[0]&4096&&(B.root=d[12]),h[0]&16384&&(B.max_file_size=d[14]),h[0]&264&&(B.disable_click=!d[8].includes("upload")||d[3]!==null),h[0]&32768&&(B.upload=d[15]),h[0]&65536&&(B.stream_handler=d[16]),h[0]&8|h[1]&2048&&(B.$$scope={dirty:h,ctx:d}),!a&&h[0]&1&&(a=!0,B.uploading=d[0],ce(()=>a=!1)),!o&&h[0]&4&&(o=!0,B.dragging=d[2],ce(()=>o=!1)),r.$set(B);let j=u;u=T(d),u===j?~u&&C[u].p(d,h):(m&&(ve(),N(C[j],1,1,()=>{C[j]=null}),be()),~u?(m=C[u],m?m.p(d,h):(m=C[u]=O[u](d),m.c()),E(m,1),m.m(s,null)):m=null),(!D||h[0]&256)&&ye(s,"reduced-height",d[8].length>1),h[0]&8&&Ze(s,"width",d[3]?"auto":"100%"),h[0]&256&&(w=d[8].length>1||d[8].includes("clipboard")),w?$?($.p(d,h),h[0]&256&&E($,1)):($=tt(d),$.c(),E($,1),$.m(n,null)):$&&(ve(),N($,1,1,()=>{$=null}),be())},i(d){D||(E(e.$$.fragment,d),E(_),E(r.$$.fragment,d),E(m),E($),D=!0)},o(d){N(e.$$.fragment,d),N(_),N(r.$$.fragment,d),N(m),N($),D=!1},d(d){d&&(ke(t),ke(n)),te(e,d),_&&_.d(),i[29](null),te(r),~u&&C[u].d(),$&&$.d()}}}function ri(i,e,t){let n,{$$slots:l={},$$scope:s}=e,{value:r}=e,{label:a=void 0}=e,{show_label:o}=e,{sources:f=["upload","clipboard","webcam"]}=e,{streaming:u=!1}=e,{pending:m=!1}=e,{mirror_webcam:y}=e,{selectable:w=!1}=e,{root:D}=e,{i18n:_}=e,{max_file_size:p=null}=e,{upload:b}=e,{stream_handler:v}=e,{stream_every:O}=e,{modify_stream:C}=e,{set_time_limit:T}=e,$,{uploading:d=!1}=e,{active_source:h=null}=e;function M({detail:c}){u||(t(3,r=c),R("upload"))}function B(){t(3,r=null),R("clear"),R("change",null)}async function j(c,oe){t(26,m=!0);const Oe=await $.load_files([new File([c],`image/${u?"jpeg":"png"}`)]);oe==="change"||oe==="upload"?(t(3,r=Oe?.[0]||null),await ei(),R("change")):R("stream",{value:Oe?.[0]||null,is_value_data:!0}),t(26,m=!1)}const R=xn();let{dragging:F=!1}=e;function Ie(c){let oe=pt(c);oe&&R("select",{index:oe,value:null})}async function ie(c){switch(c){case"clipboard":$.paste_clipboard();break}}const Se=()=>{t(3,r=null),R("clear")};function Y(c){x[c?"unshift":"push"](()=>{$=c,t(19,$)})}function Ce(c){d=c,t(0,d)}function qe(c){F=c,t(2,F)}function De(c){ge.call(this,i,c)}function Ee(c){C=c,t(4,C)}function We(c){T=c,t(5,T)}const g=c=>j(c.detail,"change"),U=c=>j(c.detail,"stream");function V(c){ge.call(this,i,c)}function le(c){ge.call(this,i,c)}const re=c=>j(c.detail,"upload");function ze(c){ge.call(this,i,c)}function ct(c){h=c,t(1,h),t(8,f)}return i.$$set=c=>{"value"in c&&t(3,r=c.value),"label"in c&&t(6,a=c.label),"show_label"in c&&t(7,o=c.show_label),"sources"in c&&t(8,f=c.sources),"streaming"in c&&t(9,u=c.streaming),"pending"in c&&t(26,m=c.pending),"mirror_webcam"in c&&t(10,y=c.mirror_webcam),"selectable"in c&&t(11,w=c.selectable),"root"in c&&t(12,D=c.root),"i18n"in c&&t(13,_=c.i18n),"max_file_size"in c&&t(14,p=c.max_file_size),"upload"in c&&t(15,b=c.upload),"stream_handler"in c&&t(16,v=c.stream_handler),"stream_every"in c&&t(17,O=c.stream_every),"modify_stream"in c&&t(4,C=c.modify_stream),"set_time_limit"in c&&t(5,T=c.set_time_limit),"uploading"in c&&t(0,d=c.uploading),"active_source"in c&&t(1,h=c.active_source),"dragging"in c&&t(2,F=c.dragging),"$$scope"in c&&t(42,s=c.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&258&&!h&&f&&t(1,h=f[0]),i.$$.dirty[0]&514&&t(18,n=u&&h==="webcam"),i.$$.dirty[0]&262145&&d&&!n&&t(3,r=null),i.$$.dirty[0]&4&&R("drag",F)},[d,h,F,r,C,T,a,o,f,u,y,w,D,_,p,b,v,O,n,$,M,B,j,R,Ie,ie,m,l,Se,Y,Ce,qe,De,Ee,We,g,U,V,le,re,ze,ct,s]}class oi extends Pn{constructor(e){super(),Kn(this,e,ri,li,Yn,{value:3,label:6,show_label:7,sources:8,streaming:9,pending:26,mirror_webcam:10,selectable:11,root:12,i18n:13,max_file_size:14,upload:15,stream_handler:16,stream_every:17,modify_stream:4,set_time_limit:5,uploading:0,active_source:1,dragging:2},null,[-1,-1])}get value(){return this.$$.ctx[3]}set value(e){this.$$set({value:e}),q()}get label(){return this.$$.ctx[6]}set label(e){this.$$set({label:e}),q()}get show_label(){return this.$$.ctx[7]}set show_label(e){this.$$set({show_label:e}),q()}get sources(){return this.$$.ctx[8]}set sources(e){this.$$set({sources:e}),q()}get streaming(){return this.$$.ctx[9]}set streaming(e){this.$$set({streaming:e}),q()}get pending(){return this.$$.ctx[26]}set pending(e){this.$$set({pending:e}),q()}get mirror_webcam(){return this.$$.ctx[10]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),q()}get selectable(){return this.$$.ctx[11]}set selectable(e){this.$$set({selectable:e}),q()}get root(){return this.$$.ctx[12]}set root(e){this.$$set({root:e}),q()}get i18n(){return this.$$.ctx[13]}set i18n(e){this.$$set({i18n:e}),q()}get max_file_size(){return this.$$.ctx[14]}set max_file_size(e){this.$$set({max_file_size:e}),q()}get upload(){return this.$$.ctx[15]}set upload(e){this.$$set({upload:e}),q()}get stream_handler(){return this.$$.ctx[16]}set stream_handler(e){this.$$set({stream_handler:e}),q()}get stream_every(){return this.$$.ctx[17]}set stream_every(e){this.$$set({stream_every:e}),q()}get modify_stream(){return this.$$.ctx[4]}set modify_stream(e){this.$$set({modify_stream:e}),q()}get set_time_limit(){return this.$$.ctx[5]}set set_time_limit(e){this.$$set({set_time_limit:e}),q()}get uploading(){return this.$$.ctx[0]}set uploading(e){this.$$set({uploading:e}),q()}get active_source(){return this.$$.ctx[1]}set active_source(e){this.$$set({active_source:e}),q()}get dragging(){return this.$$.ctx[2]}set dragging(e){this.$$set({dragging:e}),q()}}const wi=oi;export{wi as I,Mn as W};
//# sourceMappingURL=ImageUploader-DaM95-gk.js.map
